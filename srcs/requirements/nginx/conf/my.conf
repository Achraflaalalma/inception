server {
    listen 80;
    server_name localhost;

    root /var/www/html;
    index index.php index.html index.htm;

    # Check if the file exists and fallback to index.php if necessary
    location / {
        try_files $uri $uri/ /index.php?$args;
    }

    # Pass PHP requests to the PHP-FPM container
    location ~ \.php$ {
        include fastcgi_params;  # Include fastcgi_params (instead of fastcgi.conf)
        fastcgi_pass wordpress:9000;  # This matches your PHP-FPM container
        fastcgi_index index.php;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;  # Correct path to PHP script
    }

    # Add proper permissions for file access (if needed)
    location ~ /\.ht {
        deny all;
    }
}



# user www-data;
# worker_processes auto;

# events {
#     worker_connections 1024;
# }

# http {
#     include       mime.types;

#     server {
#         listen 443 ssl;
#         server_name localhost;

#         ssl_certificate /etc/ssl/certs/nginx.crt;
#         ssl_certificate_key /etc/ssl/private/nginx.key;

#         ssl_protocols TLSv1.2;

#         location / {
#             root /usr/share/nginx/html;
#             index index.html index.htm;
#         }

#         # configuration for PHP-FPM 
#         # location ~ \.php$ {
#         #     fastcgi_pass unix:/var/run/php-fpm.sock;
#         #     fastcgi_index index.php;
#         #     fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
#         #     include fastcgi_params;
#         # }
#     }
# }
